INBAG=$1
OUTBAG=$2

rosbag filter $INBAG $OUTBAG \
"((
( (topic == '/cmd_vel') or (topic == 'cmd_vel') or
  (topic == '/diagnostics') or (topic == 'diagnostics') or
  (topic == '/enc') or (topic == 'enc') or
  (topic == '/imu/data') or (topic == 'imu/data') or
  (topic == '/left_vo_q') or (topic == 'left_vo_q') or
  (topic == '/left_vo_x') or (topic == 'left_vo_x') or
  (topic == '/left_vo_y') or (topic == 'left_vo_y') or
  (topic == '/right_vo_q') or (topic == 'right_vo_q') or
  (topic == '/right_vo_x') or (topic == 'right_vo_x') or
  (topic == '/right_vo_y') or (topic == 'right_vo_y') or
  (topic == '/rosout') or (topic == 'rosout') or
  (topic == '/rosout_agg') or (topic == 'rosout_agg') or
  (topic == '/scan') or (topic == 'scan') or
  (topic == '/tf_static') or (topic == 'tf_static') )
or
(
  ( (topic == '/dw/t0') or (topic == 'dw/t0') )
and
  ( (m.dist[0] >= 0) and (m.dist[1] >= 0) and (m.dist[2] >= 0) and (m.dist[3] >=0) )
) 
))"
